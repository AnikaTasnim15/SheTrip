{% extends 'base.html' %}
{% load static %}

{% block title %}Safety Reports - SheTrip{% endblock %}

{% block content %}
<div class="card">
  <div style="display:flex;justify-content:space-between;align-items:center;">
    <div>
      <h1>Safety Reports</h1>
      <p class="muted">Community-submitted reports and incidents. Use the guidelines to stay safe.</p>
    </div>
    <div>
      <a class="btn-outline" href="{% url 'safety:guidelines_index' %}">Guidelines</a>
      {% if user.is_authenticated %}
        <a class="btn" href="{% url 'safety:safety_create' %}">Create Report</a>
      {% else %}
        <a class="btn" href="{% url 'login' %}">Login to report</a>
      {% endif %}
    </div>
  </div>
</div>

<div style="height:1rem"></div>

<div class="grid">
  <div>
    {% for r in reports %}
      <div class="card" style="margin-bottom:1rem;">
        <h3 style="margin:0"><a href="{% url 'safety:safety_detail' r.pk %}">{{ r.title }}</a></h3>
        <p class="muted" style="margin:0">{{ r.created_at|date:"M d, Y H:i" }}{% if r.reporter %} â€” {{ r.reporter }}{% endif %}</p>
        <p style="margin-top:0.5rem">{{ r.description|truncatechars:200 }}</p>
      </div>
    {% empty %}
      <div class="card">No reports yet.</div>
    {% endfor %}
  </div>

  <aside>
    <div class="card">
      <h3 style="margin-top:0">Quick Safety Tips</h3>
      <ul class="muted">
        <li>Meet in public places</li>
        <li>Share your location</li>
        <li>Check profiles and reviews</li>
      </ul>
      <p style="margin-top:1rem"><a class="btn-outline" href="{% url 'safety:guidelines_index' %}">View all guidelines</a></p>
    </div>
  </aside>
</div>

{% endblock %}
